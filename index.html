<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Scraper</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
            padding: 20px;
        }
        .container {
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
        }
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        .scrapers {
            display: flex;
            gap: 40px;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        .scraper-section {
            flex: 1;
            padding: 30px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            background-color: #fafbfc;
        }
        .scraper-section.advanced {
            border-color: #0c853c;
        }
        .scraper-section.simple {
            border-color: #1877f2;
        }
        .scraper-section h2 {
            margin-top: 0;
            margin-bottom: 15px;
        }
        .scraper-section.advanced h2 {
            color: #0c853c;
        }
        .scraper-section.simple h2 {
            color: #1877f2;
        }
        .description {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.4;
        }
        .features {
            text-align: left;
            margin-bottom: 20px;
        }
        .features ul {
            margin: 0;
            padding-left: 20px;
            font-size: 0.85rem;
            color: #555;
        }
        .features li {
            margin-bottom: 5px;
        }
        form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        input[type="url"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        button {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
            font-weight: 600;
        }
        .advanced button {
            background-color: #0c853c;
        }
        .advanced button:hover {
            background-color: #0a662e;
        }
        .simple button {
            background-color: #1877f2;
        }
        .simple button:hover {
            background-color: #166fe5;
        }
        #status {
            margin-top: 30px;
            padding: 15px;
            border-radius: 5px;
            background-color: #f8f9fa;
            border-left: 4px solid #0c853c;
            color: #555;
            display: none;
        }
        #status.show {
            display: block;
        }
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 10px;
        }
        .badge.new {
            background-color: #0c853c;
            color: white;
        }
        .badge.classic {
            background-color: #1877f2;
            color: white;
        }
        #clearButton:hover {
            background-color: #c82333 !important;
        }
        .clear-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e1e5e9;
            text-align: center;
        }
        .clear-description {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ HTML5 Game Scraper</h1>
        
        <div class="scrapers">
            <!-- Advanced Scraper -->
            <div class="scraper-section advanced">
                <div class="badge new">New & Improved</div>
                <h2>üöÄ Advanced Scraper</h2>
                <div class="description">
                    –ú–æ—â–Ω—ã–π —Å–∫—Ä–∞–ø–µ—Ä —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
                </div>
                <div class="features">
                    <ul>
                        <li>JavaScript –ø–µ—Ä–µ—Ö–≤–∞—Ç (fetch, XHR)</li>
                        <li>HTML –ø–∞—Ä—Å–∏–Ω–≥ —Å—Å—ã–ª–æ–∫</li>
                        <li>–ë—Ä—É—Ç—Ñ–æ—Ä—Å –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤</li>
                        <li>–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∏–≥—Ä–æ–π</li>
                        <li>–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
                        <li>–ü–æ–∏—Å–∫ Construct 3 —Ñ–∞–π–ª–æ–≤</li>
                    </ul>
                </div>
                <form id="advancedForm">
                    <input type="url" id="advancedURL" name="gameURL" placeholder="Enter game URL" required>
                    <button type="submit">üîç Advanced Download</button>
                </form>
            </div>

            <!-- Simple Scraper -->
            <div class="scraper-section simple">
                <div class="badge classic">Classic</div>
                <h2>‚ö° Simple Scraper</h2>
                <div class="description">
                    –ë—ã—Å—Ç—Ä—ã–π –∏ –ø—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∞–ø–µ—Ä, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö
                </div>
                <div class="features">
                    <ul>
                        <li>–ë–∞–∑–æ–≤—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤</li>
                        <li>–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞</li>
                        <li>–ú–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤</li>
                        <li>–ü—Ä–æ—Å—Ç–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
                        <li>–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞</li>
                        <li>–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º</li>
                    </ul>
                </div>
                <form id="simpleForm">
                    <input type="url" id="simpleURL" name="gameURL" placeholder="Enter game URL" required>
                    <button type="submit">‚ö° Simple Download</button>
                </form>
            </div>
        </div>
        
        <!-- Clear Resources Button -->
        <div class="clear-section">
            <div class="clear-description">
                –û—á–∏—Å—Ç–∏—Ç—å –ø–∞–ø–∫—É resources –æ—Ç –≤—Å–µ—Ö —Å–∫–∞—á–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
            </div>
            <button id="clearButton" style="background-color: #dc3545; padding: 10px 20px; border: none; border-radius: 5px; color: white; font-size: 0.9rem; cursor: pointer; transition: background-color 0.2s; font-weight: 600;">
                üóëÔ∏è Clear Resources Directory
            </button>
        </div>
        
        <div id="status"></div>
    </div>

    <script>
        function handleScrape(event, endpoint, scraperType) {
            event.preventDefault();
            const form = event.target;
            const url = form.querySelector('input[type="url"]').value;
            const statusDiv = document.getElementById('status');
            
            statusDiv.textContent = `Starting ${scraperType} scraping... Check console for progress.`;
            statusDiv.className = 'show';

            fetch(endpoint, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: 'gameURL=' + encodeURIComponent(url)
            })
            .then(response => response.text())
            .then(data => {
                statusDiv.textContent = data;
            })
            .catch(error => {
                console.error('Error:', error);
                statusDiv.textContent = 'An error occurred. See browser console for details.';
            });
        }

        document.getElementById('advancedForm').addEventListener('submit', function(event) {
            handleScrape(event, '/scrape', 'advanced');
        });

        document.getElementById('simpleForm').addEventListener('submit', function(event) {
            handleScrape(event, '/scrape-simple', 'simple');
        });

        document.getElementById('clearButton').addEventListener('click', function() {
            const statusDiv = document.getElementById('status');
            const button = this;
            
            // Confirm before clearing
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –ø–∞–ø–∫—É resources? –í—Å–µ —Å–∫–∞—á–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.')) {
                return;
            }
            
            // Disable button and show status
            button.disabled = true;
            button.textContent = 'üîÑ Clearing...';
            statusDiv.textContent = 'Clearing resources directory... Check console for progress.';
            statusDiv.className = 'show';

            fetch('/clear', {
                method: 'POST'
            })
            .then(response => response.text())
            .then(data => {
                statusDiv.textContent = data;
                button.disabled = false;
                button.innerHTML = 'üóëÔ∏è Clear Resources Directory';
            })
            .catch(error => {
                console.error('Error:', error);
                statusDiv.textContent = 'An error occurred while clearing. See browser console for details.';
                button.disabled = false;
                button.innerHTML = 'üóëÔ∏è Clear Resources Directory';
            });
        });
    </script>
</body>
</html>
